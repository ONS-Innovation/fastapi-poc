{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"FastAPI PoC Documentation","text":"<p>Note: This documentation is still being put together and is incomplete.</p>"},{"location":"#overview","title":"Overview","text":"<p>This documentation provides an overview of the FastAPI Proof of Concept (PoC). For a full overview of the project and its scope, please see the repository's <code>README.md</code> file.</p> <p>This documentation covers an overview of the AWS infrastructure used in the project and primarily, how this PoC can be further developed into our production API.</p>"},{"location":"#contents","title":"Contents","text":""},{"location":"#technology","title":"Technology","text":"<p>This section provides an overview of the technologies used in this project, along with why they were chosen.</p> <p>Read more...</p>"},{"location":"#infrastructure","title":"Infrastructure","text":"<p>This section provides an overview of the AWS infrastructure used in this project, along with its key components and architecture. This section also includes details about potential alternatives and patterns that could be considered for future development.</p> <p>Read more...</p>"},{"location":"#security","title":"Security","text":"<p>This section covers the security measures and best practices implemented in the project. This includes topics such as API Authentication and access controls through networking.</p> <p>Read more...</p>"},{"location":"#further-development","title":"Further Development","text":"<p>This section outlines the areas for further development when transitioning this project into our production API. This includes considerations for better scalability, organisation and the potential endpoint organisation for the production API.</p> <p>Read more...</p>"},{"location":"infrastructure/","title":"Infrastructure","text":""},{"location":"infrastructure/#overview","title":"Overview","text":"<p>This section provides an overview of the infrastructure components used in this project, along with why certain technologies were chosen, the patterns considered and alternatives evaluated.</p>"},{"location":"infrastructure/#implemented-components","title":"Implemented Components","text":""},{"location":"infrastructure/#overview_1","title":"Overview","text":"<p>The infrastructure deployed by the tool includes the following:</p> <ul> <li>API Gateway: The entry point for all API requests, responsible for routing requests and applying authentication.</li> <li>AWS Lambda: The compute service that runs backend code in response to events. In this case, a single FastAPI application.</li> <li>AWS WAF: The web application firewall that helps restrict access to the API to only certain IP addresses (i.e. Developer MacBook IPs).</li> <li>WAF IP Set: A set of IP addresses that are allowed or denied access to the API.</li> <li>Amazon Cognito: Integrates API Gateway with existing Cognito User Pools from our other services (i.e. Digital Landscape and Tech Audit Tool).</li> </ul> <p>See the diagram below for a visual representation of the infrastructure components and their interactions.</p> <p></p>"},{"location":"infrastructure/#api-gateway","title":"API Gateway","text":"<p>This is configured so that as much traffic as possible is proxied to AWS Lambda. This is to avoid duplicating the backend logic in multiple places, such as which endpoints are available.</p> <p>The configuration contains a single root endpoint for the API, allowing all traffic to be handled by the FastAPI application running in AWS Lambda.</p> <p>The endpoints that should be defined within API Gateway are those which need restricted access via an authorizer.</p> <p>See the diagram below for a visual representation of the API Gateway configuration.</p> <p></p>"},{"location":"infrastructure/#authorizers-cognito","title":"Authorizers: Cognito","text":"<p>As mentioned above, certain API Gateway endpoints require user authentication. This is achieved by integrating with Amazon Cognito. Most of our services use Cognito User Pools to manage user access. Using a Cognito Authorizer allows our API to build upon the existing user management infrastructure.</p> <p>More information around how this increase security, and its organisation in the potential production API can be found in the security section.</p>"},{"location":"infrastructure/#aws-lambda","title":"AWS Lambda","text":"<p>AWS Lambda is used to host our FastAPI container. This allows us to run our application code in response to events without having to manage the underlying infrastructure.</p> <p>Having FastAPI run as a Lambda prevents the service from being constantly online, even if it is not being used. Lambda executions are also very cheap.</p> <p>There is a main drawback with this, in that there is a cold start time associated with Lambda functions. If a lambda is particularly large, the cold start time can be significant, however, for our usage and expected traffic, this is an acceptable trade-off.</p>"},{"location":"infrastructure/#the-lambda-lith","title":"The Lambda-lith","text":"<p>This PoC uses a lambda-lith approach, where a single lambda deals with traffic for all API Gateway routes. This simplifies deployment and reduces the overhead of managing multiple lambda functions.</p> <p>Alternatives such as using the FAT or single purpose lambdas may be a possibility in the future, however this raises the complexity of the deployment and the management overhead.</p> <p>See The Lambda Trilogy for an overview of each pattern.</p>"},{"location":"infrastructure/#web-application-firewall-aws-waf","title":"Web Application Firewall (AWS WAF)","text":"<p>AWS WAF is used to restrict access to the API to only certain IP addresses. This is essential to secure our API so it is not exposed to the public internet. </p> <p>Using a WAF and allowed IP set ensures that it is accessible on the internet for local development purposes, but only for intended people.</p> <p>More on this is discussed in the security section.</p>"},{"location":"infrastructure/#alternative-setup-fargate-load-balancer","title":"Alternative Setup: Fargate + Load Balancer","text":"<p>An alternative setup to our API Gateway and Lambda approach would be to use AWS Fargate with an Application Load Balancer (ALB) to route traffic. This negates some of the downsides of our existing approach - including the cold start times associated with Lambda functions. In addition to this, we already have infrastructure in place for containerized applications, making this a more familiar setup for our team.</p> <p>The reason why we have not pursued this option is because API Gateway seems to be a more encouraged pattern by AWS, and it makes a few aspects of our architecture simpler, such as controlling access to endpoints and managing API versions.</p> <p>Below provides an example diagram of the Fargate + Load Balancer setup.</p> <p></p>"},{"location":"technology/","title":"Technology","text":""},{"location":"technology/#overview","title":"Overview","text":"<p>This section provides an overview of the technologies used in this project, along with why they were chosen.</p>"},{"location":"technology/#api-fastapi","title":"API: FastAPI","text":"<p>FastAPI was chosen for it quick and easy development, alongside out of the box documentation, automatic data validation using Pydantic and general performance benefits.</p> <p>When comparing FastAPI to Flask RestX (used currently by the Tech Audit Tool), FastAPI seemed like the better option, having a better developer experience and more features out of the box.</p>"},{"location":"technology/#aws-components-api-gateway-aws-lambda","title":"AWS Components: API Gateway + AWS Lambda","text":"<p>AWS API Gateway and AWS Lambda were chosen for their serverless architecture, allowing for automatic scaling and reduced operational overhead. API Gateway provides a robust way to manage and secure APIs, while Lambda allows for running code in response to events without provisioning servers.</p> <p>More on this is available in the infrastructure section.</p>"}]}